<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive DCF Calculator - ValYou Hub</title>
    
    <!-- Original website CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="../styles.css">
    <link rel="icon" href="../images/image_favicon.png">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;  
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(120deg, #16213e 0%, #1a2236 100%);
            color: #e5e7eb;
            scroll-behavior: smooth;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: auto;
        }

        /* Navigation Bar */
        .navbar {
            background: #16213e;
            color: #e5e7eb;
            border-bottom: 2px solid #4f8cff;
            width: 100%;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .nav-container {
            max-width: 1200px;
            margin: auto;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            font-size: 2rem;
            font-weight: 700;
            color: #e5e7eb;
            letter-spacing: 1px;
        }

        .logo .accent {
            color: #4f8cff;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .nav-links a {
            color: #e5e7eb;
            font-weight: 500;
            padding: 8px 18px;
            border-radius: 6px;
            transition: color 0.3s, background 0.3s;
        }

        .nav-links a:hover {
            background: rgba(79,140,255,0.08);
            color: #4f8cff;
        }

        /* Main Content */
        .dcf-container {
            min-height: calc(100vh - 120px);
            padding: 40px 20px;
            font-family: 'Poppins', sans-serif;
        }

        .header-section {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header-section h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffffff, #4f8cff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-section p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Question Type Selection */
        .question-type-selector {
            background: rgba(22, 33, 62, 0.92);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(20, 24, 40, 0.37);
            border: 1px solid #23325c;
            text-align: center;
        }

        .type-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .type-btn {
            background: linear-gradient(135deg, #23325c, #4f8cff);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .type-btn:hover, .type-btn.active {
            background: #4f8cff;
            border-color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 140, 255, 0.3);
        }

        .question-counter {
            background: rgba(79, 140, 255, 0.1);
            border: 1px solid #4f8cff;
            border-radius: 8px;
            padding: 10px 20px;
            margin: 20px 0;
            text-align: center;
            color: #4f8cff;
            font-weight: 600;
        }

        .question-nav {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .question-nav button {
            background: rgba(79, 140, 255, 0.2);
            color: #4f8cff;
            border: 1px solid #4f8cff;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .question-nav button:hover:not(:disabled) {
            background: #4f8cff;
            color: white;
        }

        .question-nav button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Question Container */

        .question-container {
            background: #23325c;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(79,140,255,0.10);
            border-left: 5px solid #4f8cff;
            color: #e5e7eb;
        }

        .question-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #4f8cff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .question-icon {
            background: linear-gradient(135deg, #16213e, #4f8cff);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-weight: bold;
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #e5e7eb;
        }

        /* Spreadsheet Section */

        .spreadsheet-wrapper {
            background: #23325c;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(79,140,255,0.10);
            overflow: hidden;
            color: #e5e7eb;
        }

        .spreadsheet-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #4f8cff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .spreadsheet-icon {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 14px;
        }

        #luckysheet {
            margin: 0 auto;
            position: relative;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }

        /* Answer Section */

        .answer-section {
            background: #23325c;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(79,140,255,0.10);
            border-left: 5px solid #22c55e;
            color: #e5e7eb;
        }

        .answer-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #10b981;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .answer-icon {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-size: 14px;
        }

        .answer-input-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .answer-input {
            flex: 1;
            min-width: 200px;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background: #f9fafb;
        }

        .answer-input:focus {
            outline: none;
            border-color: #4f8cff;
            background: white;
            box-shadow: 0 0 0 3px rgba(79, 140, 255, 0.1);
        }

        .check-btn {
            background: linear-gradient(135deg, #16213e, #4f8cff);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 140, 255, 0.3);
        }

        .solution-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
        }

        .solution-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(245, 158, 11, 0.3);
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 600;
            text-align: center;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }

        .feedback.show {
            opacity: 1;
            transform: translateY(0);
        }

        .feedback.correct {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #166534;
            border: 2px solid #22c55e;
        }

        .feedback.incorrect {
            background: linear-gradient(135deg, #fef2f2, #fecaca);
            color: #991b1b;
            border: 2px solid #ef4444;
        }

        /* Instructions */

        .instructions {
            background: #23325c;
            border: 2px solid #4f8cff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            color: #e5e7eb;
        }

        .instructions h3 {
            margin: 0 0 10px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .instructions ul {
            margin: 0;
            padding-left: 20px;
        }

        .instructions li {
            margin-bottom: 5px;
        }

        /* Footer */
        .footer {
            background: #23325c;
            color: #b8bfc9;
            border-top: 2px solid #4f8cff;
            padding: 30px 20px;
            text-align: center;
            font-family: 'Poppins', sans-serif;
            margin-top: 60px;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-links {
            margin-bottom: 15px;
        }

        .footer-links a {
            color: #4f8cff;
            font-weight: 500;
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: #fff;
            text-decoration: underline;
        }

        .footer-copy {
            font-size: 14px;
            color: #888;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .dcf-container {
                padding: 15px;
            }
            
            .header-section h1 {
                font-size: 2rem;
            }
            
            .answer-input-group {
                flex-direction: column;
            }
            
            .answer-input {
                min-width: 100%;
            }
            
            #luckysheet {
                height: 300px !important;
            }

            .type-buttons {
                flex-direction: column;
                align-items: center;
            }

            .type-btn {
                width: 200px;
            }
        }

        /* Prevent page jumping when clicking cells */
        .luckysheet-wa-editor {
            background: #f8fafc !important;
        }

        .luckysheet-cell-selected {
            border: 2px solid #4f8cff !important;
        }

        /* Fix for scroll-to-top issue */
        .luckysheet-grid-container {
            overflow: hidden !important;
        }
        
        /* Additional fix for Excel cell clicking issue */
        .luckysheet-cell:focus {
            outline: none !important;
        }
        
        .luckysheet-scrollbar {
            position: relative !important;
        }
        
        /* Learning Module Styles */
        .learning-section {
            margin-bottom: 40px;
        }
        
        .learning-module {
            background: rgba(22, 33, 62, 0.92);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(20, 24, 40, 0.37);
            border: 1px solid #23325c;
            color: #e5e7eb;
        }
        
        .module-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #4f8cff;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .time-traveler {
            text-align: center;
            position: relative;
            padding: 40px 20px;
        }
        
        .rupee-note {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
            padding: 20px 40px;
            border-radius: 10px;
            font-size: 2rem;
            font-weight: bold;
            margin: 20px auto;
            width: fit-content;
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
            transition: all 1s ease;
        }
        
        .rupee-note.shrinking {
            transform: scale(0.7);
            opacity: 0.7;
            filter: sepia(30%);
        }
        
        .time-labels {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .year-label {
            background: rgba(79, 140, 255, 0.1);
            border: 1px solid #4f8cff;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            color: #4f8cff;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .year-label.show {
            opacity: 1;
        }
        
        .choice-game {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .choice-option {
            background: rgba(79, 140, 255, 0.1);
            border: 2px solid #4f8cff;
            border-radius: 15px;
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            position: relative;
        }
        
        .choice-option:hover {
            background: rgba(79, 140, 255, 0.2);
            transform: translateY(-5px);
        }
        
        .choice-option.selected {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border-color: #22c55e;
            color: white;
        }
        
        .choice-option.wrong {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-color: #ef4444;
            color: white;
        }
        
        .choice-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .choice-time {
            font-size: 1rem;
            opacity: 0.8;
        }
        
        .reveal-section {
            margin-top: 30px;
            padding: 20px;
            background: rgba(34, 197, 94, 0.1);
            border: 2px solid #22c55e;
            border-radius: 10px;
            display: none;
        }
        
        .reveal-section.show {
            display: block;
        }
        
        .conveyor-container {
            background: linear-gradient(90deg, #1e293b, #334155);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
        }
        
        .conveyor-belt {
            display: flex;
            align-items: center;
            gap: 40px;
            min-width: 800px;
            padding: 20px 0;
        }
        
        .cash-flow {
            background: linear-gradient(45deg, #f59e0b, #d97706);
            color: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 8px 32px rgba(245, 158, 11, 0.3);
            transition: all 2s ease;
        }
        
        .cash-flow.discounted {
            background: linear-gradient(45deg, #ffffff, #4b5563);
            transform: scale(0.8);
            opacity: 0.8;
        }
        
        .cash-amount {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .year-text {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .formula-display {
            background: rgba(79, 140, 255, 0.1);
            border: 1px solid #4f8cff;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            text-align: center;
            font-family: 'Courier New', monospace;
            color: #4f8cff;
        }
        
        .arrow {
            font-size: 2rem;
            color: #4f8cff;
            animation: pulse 2s infinite;
        }
        
        .npv-assembly {
            background: rgba(22, 33, 62, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }
        
        .assembly-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            margin: 10px 0;
            background: rgba(79, 140, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid #4f8cff;
            opacity: 0;
            transform: translateX(-20px);
            transition: all 0.5s ease;
        }
        
        .assembly-row.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .assembly-row.final {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .step-number {
            background: #4f8cff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .step-content {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .step-calculation {
            font-family: 'Courier New', monospace;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 5px;
            margin-left: 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(79, 140, 255, 0.2);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4f8cff, #22c55e);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Additional fixes to prevent page jumping */
        .luckysheet-cell-main {
            position: relative !important;
        }
        
        .luckysheet-scrollbar-y, .luckysheet-scrollbar-x {
            z-index: 10 !important;
        }

        /* Educational Content Styles */

        .learning-section {
            background: linear-gradient(120deg, #23325c 0%, #16213e 100%);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(20,24,40,0.18);
            overflow: hidden;
            color: #e5e7eb;
        }

        .learning-header {
            background: rgba(22,33,62,0.92);
            color: #e5e7eb;
            padding: 25px;
            text-align: center;
        }

        .learning-header h2 {
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .learning-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .module {
            padding: 30px;
            border-bottom: 1px solid #e5e7eb;
        }

        .module:last-child {
            border-bottom: none;
        }

        .module-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .module-icon {
            font-size: 2rem;
            margin-right: 15px;
        }

        /* Time Traveler Animation */
        .time-traveler {
            background: linear-gradient(120deg, #23325c 0%, #16213e 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
            color: #e5e7eb;
        }

        .money-animation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 0;
            position: relative;
        }

        .money-note {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
            transition: all 2s ease;
        }

        .money-note.shrink {
            transform: scale(0.8);
            opacity: 0.7;
            background: linear-gradient(45deg, #f59e0b, #d97706);
        }

        .time-tunnel {
            flex: 1;
            height: 3px;
            background: linear-gradient(90deg, #10b981, #f59e0b);
            margin: 0 20px;
            position: relative;
        }

        .year-label {
            position: absolute;
            top: -30px;
            font-weight: 600;
            color: #ffffff;
            white-space: nowrap;
        }

        /* Choice Game */
        .choice-game {
            background: #23325c;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: #e5e7eb;
        }

        .choices {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            gap: 20px;
        }

        .choice-option {
            background: #23325c;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(79,140,255,0.10);
            border: 3px solid #4f8cff;
            transition: all 0.3s ease;
            flex: 1;
            color: #e5e7eb;
        }

        .choice-option.winner {
            border-color: #10b981;
            background: #10b981;
            color: #fff;
        }

        .choice-option.loser {
            border-color: #ef4444;
            background: #ef4444;
            color: #fff;
        }

        .choice-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ffffff;
            margin: 10px 0;
        }

        .choice-person {
            font-size: 3rem;
            margin: 15px 0;
        }

        /* Metaphors Section */
        .metaphors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .metaphor-card {
            background: #23325c;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(79,140,255,0.10);
            border-left: 4px solid #4f8cff;
            color: #e5e7eb;
            transition: transform 0.3s ease;
        }

        .metaphor-card:hover {
            transform: translateY(-5px);
        }

        .metaphor-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .metaphor-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #4f8cff;
            margin-bottom: 10px;
        }

        .metaphor-text {
            color: #e5e7eb;
            line-height: 1.6;
        }

        /* Conveyor Animation */
        .conveyor-belt {
            background: linear-gradient(120deg, #23325c 0%, #16213e 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
            color: #e5e7eb;
        }

        .belt-track {
            background: #ffffff;
            height: 60px;
            border-radius: 30px;
            position: relative;
            margin: 20px 0;
            overflow: hidden;
        }

        .cash-flows {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .cash-flow-item {
            text-align: center;
            flex: 1;
        }

        .cash-icon {
            background: #4f8cff;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 3px 10px rgba(79,140,255,0.10);
        }

        .cash-original {
            font-weight: 600;
            color: #b8bfc9;
            margin-bottom: 5px;
        }

        .cash-discounted {
            font-weight: bold;
            color: #10b981;
            background: rgba(16, 185, 129, 0.10);
            padding: 5px 10px;
            border-radius: 5px;
        }

        /* NPV Assembly Table */
        .npv-assembly {
            background: linear-gradient(120deg, #23325c 0%, #16213e 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            color: #e5e7eb;
        }

        .assembly-table {
            background: #23325c;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 3px 10px rgba(79,140,255,0.10);
            color: #e5e7eb;
        }

        .table-row {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .table-row:last-child {
            border-bottom: none;
        }

        .row-label {
            font-weight: 600;
            color: #ffffff;
            width: 200px;
            flex-shrink: 0;
        }

        .row-values {
            display: flex;
            gap: 20px;
            flex: 1;
        }

        .value-cell {
            background: #23325c;
            color: #4f8cff;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 500;
            min-width: 80px;
            text-align: center;
        }

        .final-npv {
            background: linear-gradient(135deg, #10b981, #059669) !important;
            color: white !important;
            font-size: 1.2rem !important;
            font-weight: bold !important;
            padding: 15px 25px !important;
            border-radius: 10px !important;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3) !important;
        }

        .profitable-badge {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 15px;
        }
    </style>
    
    <!-- Luckysheet CSS -->
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/plugins/css/pluginsCss.css' />
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/plugins/plugins.css' />
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/css/luckysheet.css' />
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/assets/iconfont/iconfont.css' />
</head>


<body>
   <header class="navbar glass" data-aos="fade-down">
    <div class="nav-container">
      <a href="../index.html">
      <div class="logo" data-aos="zoom-in"><img src="../images/image_favicon.png" height="50" width="50">Val<span class="accent">You</span>&nbsp;Hub</div></a>
      <nav class="nav-links">
        <div class="nav-item dropdown" data-aos="fade-right">
          <a href="../index.html">Home</a> </div>
        <div class="nav-item dropdown" data-aos="fade-right" data-aos-delay="100">
          <a href="../Courses/courses.html">Courses</a>
          <div class="dropdown-menu">
            <a href="../Courses/dcf.html">DCF & NPV</a>
            <a href="../Courses/irr.html">IRR</a>
            <a href="../Courses/wacc.html">WACC</a>
          </div>
        </div>
        <div class="nav-item dropdown" data-aos="fade-right" data-aos-delay="200">
          <a href="../testimonial.html">Testimonials</a>
        </div>
        <div class="nav-item dropdown" data-aos="fade-right" data-aos-delay="300">
          <a href="../faqs.html">FAQ</a></div>
        <div class="nav-item dropdown" data-aos="fade-right" data-aos-delay="200">
          <a href="../about-us.html">About Us</a>
        </div>

        <a href="../contact.html" class="contact-link" data-aos="fade-left">Contact</a>
        <a href="../Courses/courses.html" class="start-btn" data-aos="fade-left" data-aos-delay="100">Start Learning</a>
      </nav>
      <div class="menu-toggle" id="mobile-menu">&#9776;</div>
    </div>
  </header>

    <div class="dcf-container">

        <!-- Educational Content Section -->
        <div class="learning-section">
            <div class="learning-header">
                <h2>Learn NPV & DCF Fundamentals</h2>
                <p>Master the concepts before diving into calculations</p>
            </div>

            <!-- Module 1: Time Traveler's ‚Çπ100 -->
            <div class="module">
                <div class="module-title">
                    <span class="module-icon">üï∞Ô∏è</span>
                    The Time Traveler's ‚Çπ100
                </div>
                <div class="time-traveler">
                    <p style="color: #ffffff; font-size: 1.1rem; text-align: center; margin-bottom: 20px;">
                        <strong>Imagine I give you ‚Çπ100 today‚Ä¶ or ‚Çπ100 three years from now.</strong>
                    </p>
                    <div class="money-animation">
                        <div class="money-note">‚Çπ100 Today</div>
                        <div class="time-tunnel">
                            <div class="year-label" style="left: 25%;">Year 1 ‚Üí ‚Çπ90.9</div>
                            <div class="year-label" style="left: 50%;">Year 2 ‚Üí ‚Çπ82.6</div>
                            <div class="year-label" style="left: 75%;">Year 3 ‚Üí ‚Çπ75.1</div>
                        </div>
                        <div class="money-note shrink">‚Çπ100 in 3 Years</div>
                    </div>
                    <p style="color: #ffffff; text-align: center; margin-top: 20px;">
                        As money travels through time, it loses value due to inflation, risk, and opportunity cost.
                        At 10% discount rate, ‚Çπ100 in 3 years is worth only ‚Çπ75.10 today!
                    </p>
                </div>
            </div>

            <!-- Module 2: Choose Your ‚Çπ100 Game -->
            <div class="module">
                <div class="module-title">
                    <span class="module-icon">üéÆ</span>
                    The "Choose Your ‚Çπ100" Game
                </div>
                <div class="choice-game">
                    <p style="color: #ffffff; font-size: 1.1rem; text-align: center; margin-bottom: 20px;">
                        <strong>Would you rather get ‚Çπ100 today, or ‚Çπ130 after 3 years?</strong>
                            <strong>(Assuming a market interest rate of 10%)</strong>
                    </p>
                    <div class="choices">
                        <div class="choice-option" id="choice2" onclick="makeChoice(2)">
                            <div class="choice-person">üßë</div>
                            <div class="choice-value">‚Çπ100</div>
                            <div style="color: #ffffff;">Today</div>
                        </div>
                        <div style="font-size: 2rem; color: #ffffff; align-self: center;">VS</div>
                        <div class="choice-option" id="choice1" onclick="makeChoice(1)">
                            <div class="choice-person">üßë</div>
                            <div class="choice-value">‚Çπ130</div>
                            <div style="color: #ffffff;">In 3 Years</div>
                        </div>
                    </div>
                    <div id="choice-reveal" class="reveal-section">
                        <strong style="color: #10b981;">Correct Choice: ‚Çπ100 today!</strong><br>
                        <span style="color: #ffffff;">‚Çπ130 in 3 years = ‚Çπ97.67 today (at 10% discount) ‚Üí ‚Çπ100 today is better!</span>
                    </div>
                </div>
            </div>

            <!-- Module 3: Discounting Explained with Metaphors -->
            <div class="module">
                <div class="module-title">
                    <span class="module-icon">üß†</span>
                    Why Money Loses Value Over Time
                </div>
                <div class="metaphors-grid">
                    <div class="metaphor-card">
                        <span class="metaphor-icon">üéà</span>
                        <div class="metaphor-title">Inflation</div>
                        <div class="metaphor-text">Like a balloon slowly deflating, ‚Çπ100 buys less tomorrow than today</div>
                    </div>
                    <div class="metaphor-card">
                        <span class="metaphor-icon">‚òî</span>
                        <div class="metaphor-title">Risk</div>
                        <div class="metaphor-text">Future is uncertain - like holding an umbrella in a storm marked "Future"</div>
                    </div>
                    <div class="metaphor-card">
                        <span class="metaphor-icon">üõ§Ô∏è</span>
                        <div class="metaphor-title">Opportunity Cost</div>
                        <div class="metaphor-text">Two diverging roads - invest now vs. wait. Money can earn returns if invested today</div>
                    </div>
                </div>
                <div style="background: #f0f9ff; padding: 20px; border-radius: 10px; text-align: center; margin-top: 20px; border-left: 4px solid #4f8cff;">
                    <strong style="color: #1e40af;">This is why we discount the future. Let's see how.</strong>
                </div>
            </div>

            <!-- Module 4: The Discounting Conveyor -->
            <div class="module">
                <div class="module-title">
                    <span class="module-icon">üè≠</span>
                    The Discounting Conveyor
                </div>
                <div class="conveyor-belt">
                    <p style="color: #ffffff; text-align: center; margin-bottom: 20px;">
                        Watch cash flows travel through time, shrinking as they move toward the present:
                    </p>
                    <div class="belt-track"></div>
                    <div class="cash-flows">
                        <div class="cash-flow-item">
                            <div class="cash-icon">‚Çπ500</div>
                            <div class="cash-original">Year 1: ‚Çπ500</div>
                            <div class="formula-display">‚Çπ500 √∑ (1.10)¬π</div>
                            <div class="cash-discounted">= ‚Çπ454.54</div>
                        </div>
                        <div class="cash-flow-item">
                            <div class="cash-icon">‚Çπ600</div>
                            <div class="cash-original">Year 2: ‚Çπ600</div>
                            <div class="formula-display">‚Çπ600 √∑ (1.10)¬≤</div>
                            <div class="cash-discounted">= ‚Çπ495.87</div>
                        </div>
                        <div class="cash-flow-item">
                            <div class="cash-icon">‚Çπ700</div>
                            <div class="cash-original">Year 3: ‚Çπ700</div>
                            <div class="formula-display">‚Çπ700 √∑ (1.10)¬≥</div>
                            <div class="cash-discounted">= ‚Çπ525.92</div>
                        </div>
                        <div class="cash-flow-item">
                            <div class="cash-icon">‚Çπ800</div>
                            <div class="cash-original">Year 4: ‚Çπ800</div>
                            <div class="formula-display">‚Çπ800 √∑ (1.10)‚Å¥</div>
                            <div class="cash-discounted">= ‚Çπ546.41</div>
                        </div>
                        <div class="cash-flow-item">
                            <div class="cash-icon">‚Çπ900</div>
                            <div class="cash-original">Year 5: ‚Çπ900</div>
                            <div class="formula-display">‚Çπ900 √∑ (1.10)‚Åµ</div>
                            <div class="cash-discounted">= ‚Çπ558.95</div>
                        </div>
                    </div>
                    <div style="background: rgba(79, 140, 255, 0.1); padding: 15px; border-radius: 8px; text-align: center; margin-top: 20px;">
                        <strong style="color: #4f8cff;">All cash flows discounted at 10% rate</strong>
                    </div>
                </div>
            </div>

            <!-- Module 5: NPV Assembly Table -->
            <div class="module">
                <div class="module-title">
                    <span class="module-icon">üßÆ</span>
                    <span style="color: #ffffff;">NPV Assembly Blueprint</span>
                </div>
                <div class="npv-assembly">
                    <p style="color: #ffffff; text-align: center; margin-bottom: 20px;">
                        Watch how NPV is assembled step by step:
                    </p>
                    <button id="start-assembly" onclick="startNPVAssembly()" style="background: #4f8cff; color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; margin-bottom: 20px; display: block; margin: 0 auto 20px;">
                        ‚ñ∂ Start NPV Assembly
                    </button>
                    <div class="progress-bar">
                        <div class="progress-fill" id="assembly-progress"></div>
                    </div>
                    <div class="assembly-table">
                        <div class="assembly-row" id="step1">
                            <div class="step-number" style="color: #ffffff;">1</div>
                            <div class="step-content">
                                <span style="color: #ffffff;">Cash Flows</span>
                                <div style="display: flex; gap: 10px;">
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ500</div>
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ600</div>
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ700</div>
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ800</div>
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ900</div>
                                </div>
                            </div>
                        </div>
                        <div class="assembly-row" id="step2">
                            <div class="step-number" style="color: #ffffff;">2</div>
                            <div class="step-content">
                                <span style="color: #ffffff;">Apply Discount Rate (10%)</span>
                                <div class="step-calculation" style="color: #ffffff;">Cash Flow √∑ (1 + rate)‚Åø</div>
                            </div>
                        </div>
                        <div class="assembly-row" id="step3">
                            <div class="step-number" style="color: #ffffff;">3</div>
                            <div class="step-content">
                                <span style="color: #ffffff;">Present Values</span>
                                <div style="display: flex; gap: 10px;">
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ454.54</div>
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ495.87</div>
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ525.92</div>
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ546.41</div>
                                    <div class="value-cell" style="color: #ffffff;">‚Çπ558.95</div>
                                </div>
                            </div>
                        </div>
                        <div class="assembly-row" id="step4">
                            <div class="step-number" style="color: #ffffff;">4</div>
                            <div class="step-content">
                                <span style="color: #ffffff;">Sum All Present Values</span>
                                <div class="step-calculation" style="color: #ffffff;">‚Çπ454.54 + ‚Çπ495.87 + ‚Çπ525.92 + ‚Çπ546.41 + ‚Çπ558.95</div>
                                <div class="value-cell" style="background: #dcfce7; color: #166534; font-weight: bold;">= ‚Çπ2,580.69</div>
                            </div>
                        </div>
                        <div class="assembly-row" id="step5">
                            <div class="step-number" style="color: #ffffff;">5</div>
                            <div class="step-content">
                                <span style="color: #ffffff;">Subtract Initial Investment</span>
                                <div class="step-calculation" style="color: #ffffff;">‚Çπ2,580.69 - ‚Çπ2,000</div>
                                <div class="value-cell" style="background: #fef2f2; color: #991b1b; font-weight: bold;">= ‚Çπ580.69</div>
                            </div>
                        </div>
                        <div class="assembly-row final" id="step6">
                            <div class="step-number">‚úì</div>
                            <div class="step-content">
                                <span><strong>Net Present Value (NPV)</strong></span>
                                <div class="value-cell final-npv">‚Çπ580.69</div>
                            </div>
                        </div>
                    </div>
                    <div id="profitability-result" style="opacity: 0; transition: opacity 0.5s ease;">
                        <div class="profitable-badge">
                            ‚úî Profitable Investment - Positive NPV!
                        </div>
                        <p style="color: #ffffff; text-align: center; margin-top: 15px;">
                            Since NPV > 0, this investment creates value and should be accepted.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Question Type Selector -->
        <div class="question-type-selector">
            <h2 style="color: #4f8cff; margin-bottom: 15px;">Select Question Difficulty</h2>
            <p style="color: #e5e7eb; margin-bottom: 20px;">Choose your level and practice DCF calculations</p>
            <div class="type-buttons">
                <button class="type-btn active" data-type="1">Type 1 - Basic</button>
                <button class="type-btn" data-type="2">Type 2 - Intermediate</button>
                <button class="type-btn" data-type="3">Type 3 - Advanced</button>
            </div>
            <div class="question-counter">
                <span id="currentQuestion">Question 1 of 5</span>
            </div>
            <div class="question-nav">
                <button id="prevBtn" onclick="changeQuestion(-1)" disabled>‚Üê Previous</button>
                <button id="nextBtn" onclick="changeQuestion(1)">Next ‚Üí</button>
            </div>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <h3>üìã How to Use This DCF Calculator</h3>
            <ul>
                <li><strong>Click any cell</strong> to edit values and create formulas</li>
                <li><strong>Use Excel formulas</strong> like =B2+C2, =NPV(rate,range), =B2*C2</li>
                <li><strong>Calculate DCF</strong> using the data provided and enter your final answer</li>
                <li><strong>Check your work</strong> to see if you got the correct valuation</li>
            </ul>
        </div>

        <!-- Question Container -->
        <div class="question-container" id="questionContainer">
            <!-- Questions will be loaded here dynamically -->
        </div>

        <!-- Spreadsheet Section -->
        <div class="spreadsheet-wrapper">
            <div class="spreadsheet-title">
                <div class="spreadsheet-icon">üìä</div>
                DCF Calculation Worksheet
            </div>
            <div id="luckysheet" style="margin:0px;padding:0px;position:relative;width:100%;height:400px;left: 0px; top: 0px;"></div>
        </div>

        <!-- Answer Section -->
        <div class="answer-section">
            <div class="answer-title">
                <div class="answer-icon">‚úì</div>
                Submit Your Final Answer
            </div>
            <div class="answer-input-group">
                <input type="number" id="finalAnswer" class="answer-input" placeholder="Enter the company's intrinsic value (‚Çπ)" step="0.01">
                <button id="checkAnswer" class="check-btn">Check Answer</button>
                <button id="showSolution" class="solution-btn">Show Solution</button>
            </div>
            <div id="feedback" class="feedback"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
  <div class="footer-container">
    
    <!-- About -->
    <div class="footer-column about">
      <h2 class="footer-logo">ValYou Hub</h2>
      <p>Empowering learners to master valuation techniques like DCF, NPV, and IRR with real-world, hands-on practice. Learn smart. Build skills. Create value.</p>
    </div>

    <!-- Quick Links -->
    <div class="footer-column">
      <h4>Quick Links</h4>
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../Courses/courses.html">Courses</a></li>
        <li><a href="../testimonial.html">Testimonials</a></li>
        <li><a href="../faqs.html">FAQ</a></li>
        <li><a href="../about-us.html">About Us</a></li>
        <li><a href="../contact.html">Contact</a></li>
      </ul>
    </div>

    <!-- Contact -->
    <div class="footer-column">
      <h4>Contact Us</h4>
      <ul>
        <li><i class="fas fa-envelope"></i> <a href="mailto:info@valyouhub.com">info@valyouhub.com</a></li>
        <li><i class="fas fa-phone"></i> <a href="tel:+911234567890">+91-1234567890</a></li>
        <li><i class="fas fa-map-marker-alt"></i> 123 Finance Avenue, Mumbai, Maharashtra, 400001, India</li>
      </ul>
    </div>

    <!-- Social Media -->
    <div class="footer-column">
      <h4>Follow Us</h4>
      <div class="social-icons">
        <a href="#"><i class="fab fa-linkedin"></i></a> 
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-youtube"></i></a>
      </div>
    </div>
  </div>

  <!-- Bottom -->
  <div class="footer-bottom">
    <p>¬© 2025 ValYou Hub. All Rights Reserved.</p>
  </div>
</footer>



    <!-- Luckysheet JS -->
    <script src="https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/plugins/js/plugin.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/luckysheet.umd.js"></script>

    <!-- Custom JavaScript -->
    <script>
        // Questions database
        const questions = {
            1: [ // Type 1 - Basic
                {
                    title: "Basic DCF Valuation",
                    scenario: "You're valuing a company with the following projected free cash flows:",
                    details: [
                        "Year 1: ‚Çπ50,000",
                        "Year 2: ‚Çπ60,000", 
                        "Year 3: ‚Çπ70,000",
                        "Terminal Value (Year 3): ‚Çπ800,000",
                        "Discount Rate (WACC): 12%"
                    ],
                    task: "Calculate the present value of all future cash flows to determine the company's intrinsic value.",
                    answer: 619470,
                    tolerance: 0.05,
                    solution: `Year 1 PV: ‚Çπ50,000 √∑ (1.12)¬π = ‚Çπ44,643\nYear 2 PV: ‚Çπ60,000 √∑ (1.12)¬≤ = ‚Çπ47,832\nYear 3 PV: ‚Çπ70,000 √∑ (1.12)¬≥ = ‚Çπ49,802\nTerminal PV: ‚Çπ800,000 √∑ (1.12)¬≥ = ‚Çπ569,193\n\nTotal = ‚Çπ619,470`,
                    cashflows: [50000, 60000, 70000],
                    terminal: 800000,
                    wacc: 0.12
                },
                {
                    title: "Simple Growth DCF",
                    scenario: "A retail company has the following cash flow projections:",
                    details: [
                        "Year 1: ‚Çπ40,000",
                        "Year 2: ‚Çπ45,000",
                        "Year 3: ‚Çπ50,000", 
                        "Terminal Value (Year 3): ‚Çπ600,000",
                        "Discount Rate (WACC): 10%"
                    ],
                    task: "Calculate the enterprise value using DCF analysis.",
                    answer: 553431,
                    tolerance: 0.05,
                    solution: `Year 1 PV: ‚Çπ40,000 √∑ (1.10)¬π = ‚Çπ36,364\nYear 2 PV: ‚Çπ45,000 √∑ (1.10)¬≤ = ‚Çπ37,190\nYear 3 PV: ‚Çπ50,000 √∑ (1.10)¬≥ = ‚Çπ37,566\nTerminal PV: ‚Çπ600,000 √∑ (1.10)¬≥ = ‚Çπ450,789\n\nTotal = ‚Çπ561,909`,
                    cashflows: [40000, 45000, 50000],
                    terminal: 600000,
                    wacc: 0.10
                },
                {
                    title: "Manufacturing DCF",
                    scenario: "A manufacturing company shows these projections:",
                    details: [
                        "Year 1: ‚Çπ75,000",
                        "Year 2: ‚Çπ80,000",
                        "Year 3: ‚Çπ85,000",
                        "Terminal Value (Year 3): ‚Çπ950,000", 
                        "Discount Rate (WACC): 8%"
                    ],
                    task: "Determine the company's fair value using DCF methodology.",
                    answer: 900000,
                    tolerance: 0.05,
                    solution: `Year 1 PV: ‚Çπ75,000 √∑ (1.08)¬π = ‚Çπ69,444\nYear 2 PV: ‚Çπ80,000 √∑ (1.08)¬≤ = ‚Çπ68,587\nYear 3 PV: ‚Çπ85,000 √∑ (1.08)¬≥ = ‚Çπ67,504\nTerminal PV: ‚Çπ950,000 √∑ (1.08)¬≥ = ‚Çπ754,298\n\nTotal = ‚Çπ959,833`,
                    cashflows: [75000, 80000, 85000],
                    terminal: 950000,
                    wacc: 0.08
                },
                {
                    title: "Service Sector DCF", 
                    scenario: "A service company has these financial projections:",
                    details: [
                        "Year 1: ‚Çπ30,000",
                        "Year 2: ‚Çπ35,000",
                        "Year 3: ‚Çπ40,000",
                        "Terminal Value (Year 3): ‚Çπ500,000",
                        "Discount Rate (WACC): 15%"
                    ],
                    task: "Calculate the intrinsic value using discounted cash flow analysis.",
                    answer: 408000,
                    tolerance: 0.05,
                    solution: `Year 1 PV: ‚Çπ30,000 √∑ (1.15)¬π = ‚Çπ26,087\nYear 2 PV: ‚Çπ35,000 √∑ (1.15)¬≤ = ‚Çπ26,455\nYear 3 PV: ‚Çπ40,000 √∑ (1.15)¬≥ = ‚Çπ26,305\nTerminal PV: ‚Çπ500,000 √∑ (1.15)¬≥ = ‚Çπ328,815\n\nTotal = ‚Çπ407,662`,
                    cashflows: [30000, 35000, 40000],
                    terminal: 500000,
                    wacc: 0.15
                },
                {
                    title: "Technology Startup DCF",
                    scenario: "A tech startup shows rapid growth potential:",
                    details: [
                        "Year 1: ‚Çπ25,000",
                        "Year 2: ‚Çπ40,000", 
                        "Year 3: ‚Çπ60,000",
                        "Terminal Value (Year 3): ‚Çπ750,000",
                        "Discount Rate (WACC): 18%"
                    ],
                    task: "Value this high-growth company using DCF analysis.",
                    answer: 580000,
                    tolerance: 0.05,
                    solution: `Year 1 PV: ‚Çπ25,000 √∑ (1.18)¬π = ‚Çπ21,186\nYear 2 PV: ‚Çπ40,000 √∑ (1.18)¬≤ = ‚Çπ28,734\nYear 3 PV: ‚Çπ60,000 √∑ (1.18)¬≥ = ‚Çπ36,520\nTerminal PV: ‚Çπ750,000 √∑ (1.18)¬≥ = ‚Çπ456,502\n\nTotal = ‚Çπ542,942`,
                    cashflows: [25000, 40000, 60000],
                    terminal: 750000,
                    wacc: 0.18
                }
            ],
            2: [ // Type 2 - Intermediate
                {
                    title: "Multi-Year DCF with Growth",
                    scenario: "A growing company with 5-year projections:",
                    details: [
                        "Year 1: ‚Çπ100,000",
                        "Year 2: ‚Çπ120,000",
                        "Year 3: ‚Çπ144,000",
                        "Year 4: ‚Çπ172,800",
                        "Year 5: ‚Çπ207,360",
                        "Terminal Value (Year 5): ‚Çπ2,500,000",
                        "Discount Rate (WACC): 11%"
                    ],
                    task: "Calculate the enterprise value for this multi-year projection.",
                    answer: 2200000,
                    tolerance: 0.05,
                    solution: `5-year DCF calculation with terminal value discounted to present value`,
                    cashflows: [100000, 120000, 144000, 172800, 207360],
                    terminal: 2500000,
                    wacc: 0.11
                },
                {
                    title: "Cyclical Business DCF",
                    scenario: "A cyclical manufacturing business:",
                    details: [
                        "Year 1: ‚Çπ80,000",
                        "Year 2: ‚Çπ60,000",
                        "Year 3: ‚Çπ100,000",
                        "Year 4: ‚Çπ120,000",
                        "Year 5: ‚Çπ90,000",
                        "Terminal Value (Year 5): ‚Çπ1,800,000",
                        "Discount Rate (WACC): 13%"
                    ],
                    task: "Value this cyclical business considering varying cash flows.",
                    answer: 1650000,
                    tolerance: 0.05,
                    solution: `Cyclical DCF with varying annual cash flows`,
                    cashflows: [80000, 60000, 100000, 120000, 90000],
                    terminal: 1800000,
                    wacc: 0.13
                },
                {
                    title: "REIT DCF Analysis",
                    scenario: "A Real Estate Investment Trust (REIT):",
                    details: [
                        "Year 1: ‚Çπ150,000",
                        "Year 2: ‚Çπ160,000",
                        "Year 3: ‚Çπ170,000",
                        "Year 4: ‚Çπ180,000",
                        "Year 5: ‚Çπ190,000",
                        "Terminal Value (Year 5): ‚Çπ3,200,000",
                        "Discount Rate (WACC): 9%"
                    ],
                    task: "Calculate the REIT's net asset value using DCF.",
                    answer: 2800000,
                    tolerance: 0.05,
                    solution: `REIT valuation with steady growth pattern`,
                    cashflows: [150000, 160000, 170000, 180000, 190000],
                    terminal: 3200000,
                    wacc: 0.09
                },
                {
                    title: "Pharmaceutical DCF",
                    scenario: "A pharmaceutical company with R&D investments:",
                    details: [
                        "Year 1: ‚Çπ50,000",
                        "Year 2: ‚Çπ70,000",
                        "Year 3: ‚Çπ110,000",
                        "Year 4: ‚Çπ160,000",
                        "Year 5: ‚Çπ200,000",
                        "Terminal Value (Year 5): ‚Çπ2,800,000",
                        "Discount Rate (WACC): 14%"
                    ],
                    task: "Value this pharma company considering drug development cycles.",
                    answer: 1900000,
                    tolerance: 0.05,
                    solution: `Pharma DCF with accelerating growth from drug launches`,
                    cashflows: [50000, 70000, 110000, 160000, 200000],
                    terminal: 2800000,
                    wacc: 0.14
                },
                {
                    title: "Energy Sector DCF",
                    scenario: "An energy company with commodity exposure:",
                    details: [
                        "Year 1: ‚Çπ200,000",
                        "Year 2: ‚Çπ180,000",
                        "Year 3: ‚Çπ220,000",
                        "Year 4: ‚Çπ240,000",
                        "Year 5: ‚Çπ210,000",
                        "Terminal Value (Year 5): ‚Çπ3,500,000",
                        "Discount Rate (WACC): 12%"
                    ],
                    task: "Calculate the energy company's fair value.",
                    answer: 2600000,
                    tolerance: 0.05,
                    solution: `Energy sector DCF with commodity price volatility`,
                    cashflows: [200000, 180000, 220000, 240000, 210000],
                    terminal: 3500000,
                    wacc: 0.12
                }
            ],
            3: [ // Type 3 - Advanced
                {
                    title: "Complex Multi-Stage DCF",
                    scenario: "A technology company in different growth phases:",
                    details: [
                        "High Growth Phase (Years 1-3): 25% growth",
                        "Year 1: ‚Çπ100,000",
                        "Transition Phase (Years 4-6): 15% growth",
                        "Mature Phase (Year 7+): 5% growth",
                        "Terminal Value multiple: 20x final year FCF",
                        "Discount Rate (WACC): 16%"
                    ],
                    task: "Build a multi-stage DCF model with changing growth rates.",
                    answer: 1800000,
                    tolerance: 0.07,
                    solution: `Multi-stage DCF: High growth ‚Üí Transition ‚Üí Mature phase`,
                    cashflows: [100000, 125000, 156250, 179688, 206641, 237637],
                    terminal: 4990374,
                    wacc: 0.16
                },
                {
                    title: "Private Equity LBO Analysis",
                    scenario: "Leveraged buyout scenario analysis:",
                    details: [
                        "EBITDA Year 1: ‚Çπ500,000",
                        "EBITDA Growth: 8% annually",
                        "Exit Multiple: 12x EBITDA (Year 5)",
                        "Initial Debt: ‚Çπ2,000,000",
                        "Debt Paydown: ‚Çπ300,000/year",
                        "Required Return: 20%"
                    ],
                    task: "Calculate equity value in this LBO scenario.",
                    answer: 4500000,
                    tolerance: 0.08,
                    solution: `LBO analysis with debt paydown and exit multiple`,
                    cashflows: [200000, 216000, 233280, 251942, 272098],
                    terminal: 7929408,
                    wacc: 0.20
                },
                {
                    title: "SOTP Valuation",
                    scenario: "Sum-of-the-parts valuation for a conglomerate:",
                    details: [
                        "Division A: ‚Çπ800,000 FCF, 12x multiple",
                        "Division B: ‚Çπ600,000 FCF, 15x multiple", 
                        "Division C: ‚Çπ400,000 FCF, 8x multiple",
                        "Corporate Overhead: ‚Çπ200,000 annually",
                        "Net Debt: ‚Çπ1,500,000",
                        "Discount for conglomerate: 15%"
                    ],
                    task: "Calculate the sum-of-the-parts enterprise value.",
                    answer: 16500000,
                    tolerance: 0.06,
                    solution: `SOTP: (Div A + Div B + Div C - Overhead) - Discount`,
                    cashflows: [800000, 600000, 400000],
                    terminal: 0,
                    wacc: 0.12
                },
                {
                    title: "Option-Adjusted DCF",
                    scenario: "Company with real options and scenarios:",
                    details: [
                        "Base Case FCF Year 1: ‚Çπ300,000",
                        "Upside Scenario (30% prob): +50% FCF",
                        "Downside Scenario (20% prob): -30% FCF",
                        "Base Scenario (50% prob): Normal growth",
                        "Growth Option Value: ‚Çπ2,000,000",
                        "Abandonment Option Value: ‚Çπ500,000",
                        "Discount Rate: 18%"
                    ],
                    task: "Value the company including real options.",
                    answer: 4200000,
                    tolerance: 0.08,
                    solution: `Probability-weighted DCF + Real Options Value`,
                    cashflows: [300000, 330000, 363000, 399300, 439230],
                    terminal: 2927533,
                    wacc: 0.18
                },
                {
                    title: "Cross-Border DCF",
                    scenario: "Multinational company with currency considerations:",
                    details: [
                        "US Operations: $500,000 FCF (USD)",
                        "India Operations: ‚Çπ2,000,000 FCF (INR)",
                        "Europe Operations: ‚Ç¨300,000 FCF (EUR)",
                        "Exchange Rates: USD/INR=83, EUR/INR=90",
                        "Country Risk Premiums: US(0%), India(2%), EU(1%)",
                        "Base WACC: 12%"
                    ],
                    task: "Calculate consolidated enterprise value in INR.",
                    answer: 32000000,
                    tolerance: 0.10,
                    solution: `Multi-currency DCF with country risk adjustments`,
                    cashflows: [2000000, 2200000, 2420000, 2662000, 2928200],
                    terminal: 19521333,
                    wacc: 0.12
                }
            ]
        };

        // Current state
        let currentType = 1;
        let currentQuestionIndex = 0;
        let luckysheetInstance = null;

        // Initialize the application
        function initializeDCF() {
            setupEventListeners();
            loadQuestion();
            initializeLuckysheet();
        }

        function setupEventListeners() {
            // Type selection buttons
            document.querySelectorAll('.type-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    currentType = parseInt(e.target.dataset.type);
                    currentQuestionIndex = 0;
                    updateTypeButtons();
                    loadQuestion();
                    updateSpreadsheet();
                });
            });

            // Answer checking
            document.getElementById('checkAnswer').addEventListener('click', checkAnswer);
            document.getElementById('showSolution').addEventListener('click', showSolution);
            
            // Enter key support
            document.getElementById('finalAnswer').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });
        }

        function updateTypeButtons() {
            document.querySelectorAll('.type-btn').forEach(btn => {
                btn.classList.toggle('active', parseInt(btn.dataset.type) === currentType);
            });
            updateQuestionCounter();
        }

        function updateQuestionCounter() {
            document.getElementById('currentQuestion').textContent = 
                `Question ${currentQuestionIndex + 1} of ${questions[currentType].length}`;
            
            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            document.getElementById('nextBtn').disabled = currentQuestionIndex === questions[currentType].length - 1;
        }

        function changeQuestion(direction) {
            const newIndex = currentQuestionIndex + direction;
            if (newIndex >= 0 && newIndex < questions[currentType].length) {
                currentQuestionIndex = newIndex;
                loadQuestion();
                updateSpreadsheet();
                updateQuestionCounter();
                clearFeedback();
            }
        }

        function loadQuestion() {
            const question = questions[currentType][currentQuestionIndex];
            const container = document.getElementById('questionContainer');
            
            container.innerHTML = `
                <div class="question-title">
                    <div class="question-icon">Q</div>
                    ${question.title}
                </div>
                <div class="question-text">
                    <strong>Scenario:</strong> ${question.scenario}<br>
                    ${question.details.map(detail => `‚Ä¢ ${detail}`).join('<br>')}<br><br>
                    <strong>Task:</strong> ${question.task}
                </div>
            `;
            
            // Clear previous answer
            document.getElementById('finalAnswer').value = '';
            clearFeedback();
        }

        function clearFeedback() {
            const feedback = document.getElementById('feedback');
            feedback.className = 'feedback';
            feedback.innerHTML = '';
        }

        function initializeLuckysheet() {
            // Destroy existing instance if it exists
            if (luckysheetInstance) {
                luckysheet.destroy();
            }

            const question = questions[currentType][currentQuestionIndex];
            
            const options = {
                container: 'luckysheet',
                showinfobar: false,
                showsheetbar: false,
                showstatisticBar: false,
                enableAddRow: false,
                enableAddCol: false,
                showConfigmenu: false,
                allowEdit: true,
                allowCopy: true,
                allowPaste: true,
                // Prevent scrolling issues
                scrollbar: {
                    x: false,
                    y: false
                },
                // Additional configs to prevent page jumping
                containerScrolling: false,
                preventDefaultKeyboard: true,
                data: [{
                    name: "DCF Model",
                    color: "",
                    index: 0,
                    status: 1,
                    order: 0,
                    hide: 0,
                    row: 20,
                    column: 10,
                    defaultRowHeight: 25,
                    defaultColWidth: 100,
                    celldata: generateCellData(question)
                }],
                title: 'DCF Calculator',
                userInfo: false,
                lang: 'en',
            };

            // Initialize with timeout to ensure DOM is ready
            setTimeout(() => {
                luckysheet.create(options);
                luckysheetInstance = luckysheet;
                
                
                
                // Additional fixes to prevent page jumping
                const luckyContainer = document.getElementById('luckysheet');
                if (luckyContainer) {
                    luckyContainer.addEventListener('scroll', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                    }, { passive: false });
                    
                    luckyContainer.addEventListener('wheel', function(e) {
                        e.stopPropagation();
                    }, { passive: true });
                    
                    // Fix cell click scrolling issue
                    luckyContainer.style.position = 'relative';
                    luckyContainer.style.overflow = 'hidden';
                }
                
                // Additional global fix for cell clicking
                document.addEventListener('focusin', function(e) {
                    if (e.target.closest('#luckysheet')) {
                        e.preventDefault();
                        window.scrollTo({top: window.scrollY, behavior: 'instant'});
                    }
                });
                
                // Prevent hash changes from affecting scroll
                window.addEventListener('hashchange', function(e) {
                    e.preventDefault();
                    window.scrollTo({top: window.scrollY, behavior: 'instant'});
                });
            }, 100);
        }

        function generateCellData(question) {
            const celldata = [];
            const years = question.cashflows.length;
            
            // Headers
            celldata.push({r: 0, c: 0, v: {v: "DCF Valuation Model", ct: {fa: "General", t: "g"}, m: "DCF Valuation Model", bg: "#000000", fc: "#ffffff", bl: 1, fs: 14}});
            
            // Year headers
            celldata.push({r: 2, c: 0, v: {v: "Year", ct: {fa: "General", t: "g"}, m: "Year", bg: "#f1f5f9", fc: "#16213e", bl: 1}});
            for (let i = 0; i < years; i++) {
                celldata.push({r: 2, c: i + 1, v: {v: i + 1, ct: {fa: "General", t: "n"}, m: (i + 1).toString(), bg: "#f1f5f9", fc: "#16213e", bl: 1}});
            }
            
            // Cash flows
            celldata.push({r: 3, c: 0, v: {v: "Free Cash Flow (‚Çπ)", ct: {fa: "General", t: "g"}, m: "Free Cash Flow (‚Çπ)", bg: "#f8fafc", fc: "#000000", bl: 1}});
            for (let i = 0; i < years; i++) {
                celldata.push({r: 3, c: i + 1, v: {v: question.cashflows[i], ct: {fa: "General", t: "n"}, m: question.cashflows[i].toString(), bg: "#ffffff", fc: "#000000"}});
            }
            
            // Terminal value
            if (question.terminal > 0) {
                celldata.push({r: 4, c: 0, v: {v: "Terminal Value (‚Çπ)", ct: {fa: "General", t: "g"}, m: "Terminal Value (‚Çπ)", bg: "#f8fafc", fc: "#000000", bl: 1}});
                for (let i = 0; i < years - 1; i++) {
                    celldata.push({r: 4, c: i + 1, v: {v: "", ct: {fa: "General", t: "g"}, m: "", bg: "#ffffff", fc: "#000000"}});
                }
                celldata.push({r: 4, c: years, v: {v: question.terminal, ct: {fa: "General", t: "n"}, m: question.terminal.toString(), bg: "#ffffff", fc: "#000000"}});
            }
            
            // WACC
            celldata.push({r: 6, c: 0, v: {v: "Discount Rate (WACC)", ct: {fa: "General", t: "g"}, m: "Discount Rate (WACC)", bg: "#f8fafc", fc: "#000000", bl: 1}});
            celldata.push({r: 6, c: 1, v: {v: question.wacc, ct: {fa: "0.00%", t: "n"}, m: (question.wacc * 100).toFixed(2) + "%", bg: "#ffffff", fc: "#000000"}});
            
            // Add formula placeholders
            celldata.push({r: 8, c: 0, v: {v: "Present Value (‚Çπ)", ct: {fa: "General", t: "g"}, m: "Present Value (‚Çπ)", bg: "#dcfce7", fc: "#166534", bl: 1}});
            celldata.push({r: 10, c: 0, v: {v: "Total Enterprise Value", ct: {fa: "General", t: "g"}, m: "Total Enterprise Value", bg: "#fef2f2", fc: "#991b1b", bl: 1}});
            
            return celldata;
        }

        function updateSpreadsheet() {
            if (luckysheetInstance) {
                initializeLuckysheet();
            }
        }

        function checkAnswer() {
            const userAnswer = parseFloat(document.getElementById('finalAnswer').value);
            const question = questions[currentType][currentQuestionIndex];
            const feedback = document.getElementById('feedback');
            
            if (isNaN(userAnswer)) {
                feedback.textContent = '‚ùå Please enter a valid number.';
                feedback.className = 'feedback incorrect show';
                return;
            }

            const percentDiff = Math.abs(userAnswer - question.answer) / question.answer;
            
            if (percentDiff <= question.tolerance) {
                feedback.innerHTML = `
                    ‚úÖ <strong>Correct!</strong> Well done! <br>
                    Your answer: ‚Çπ${userAnswer.toLocaleString('en-IN')}<br>
                    Expected: ‚Çπ${question.answer.toLocaleString('en-IN')}<br>
                    <small>You successfully calculated the DCF valuation!</small>
                `;
                feedback.className = 'feedback correct show';
            } else {
                feedback.innerHTML = `
                    ‚ùå <strong>Not quite right.</strong><br>
                    Your answer: ‚Çπ${userAnswer.toLocaleString('en-IN')}<br>
                    Expected: ‚Çπ${question.answer.toLocaleString('en-IN')}<br>
                    <small>Hint: Make sure you're discounting all cash flows to present value and summing them up.</small>
                `;
                feedback.className = 'feedback incorrect show';
            }
        }

        function showSolution() {
            const question = questions[currentType][currentQuestionIndex];
            alert(`DCF Solution:\n\n${question.solution}\n\nExpected Answer: ‚Çπ${question.answer.toLocaleString('en-IN')}`);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeDCF);

        // Learning module functions
        function makeChoice(choice) {
            const choice1 = document.getElementById('choice1');
            const choice2 = document.getElementById('choice2');
            const reveal = document.getElementById('choice-reveal');
            
            if (choice === 1) {
                choice1.classList.add('wrong');
                choice2.classList.add('selected');
            } else {
                choice1.classList.add('wrong');  
                choice2.classList.add('selected');
            }
            
            setTimeout(() => {
                reveal.classList.add('show');
            }, 1000);
        }
        
        function startNPVAssembly() {
            const button = document.getElementById('start-assembly');
            const progress = document.getElementById('assembly-progress');
            const result = document.getElementById('profitability-result');
            
            button.style.display = 'none';
            
            let step = 1;
            const totalSteps = 6;
            
            function showStep() {
                const stepElement = document.getElementById(`step${step}`);
                if (stepElement) {
                    stepElement.classList.add('show');
                    progress.style.width = `${(step / totalSteps) * 100}%`;
                }
                
                if (step === totalSteps) {
                    setTimeout(() => {
                        result.style.opacity = '1';
                    }, 500);
                } else {
                    step++;
                    setTimeout(showStep, 800);
                }
            }
            
            showStep();
        }

        // Prevent page scroll when interacting with spreadsheet
        document.addEventListener('click', function(e) {
            if (e.target.closest('#luckysheet')) {
                e.preventDefault();
                e.stopPropagation();
                // Keep current scroll position
                const currentY = window.scrollY;
                setTimeout(() => {
                    window.scrollTo(0, currentY);
                }, 0);
            }
        }, true);
        
        // Additional scroll prevention
        document.addEventListener('focusin', function(e) {
            if (e.target.closest('#luckysheet')) {
                const currentY = window.scrollY;
                setTimeout(() => {
                    window.scrollTo(0, currentY);
                }, 0);
            }
        });
    </script>
    <!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <title>Font Size Controls (No-wrap)</title> <meta name="viewport" content="width=device-width, initial-scale=1" /> <style> .vh-font-controls{ display:inline-flex; align-items:center; gap:.5rem; flex-wrap:nowrap; white-space:nowrap; margin-left:auto; /* pushes right in flex navs */ flex-shrink:0; /* never shrink into next line */ min-width:max-content; /* keep on one line */ } .vh-font-btn{ cursor:pointer; border:1px solid rgba(0,0,0,.15); background:rgba(255,255,255,.85); padding:.3rem .5rem; border-radius:.4rem; line-height:1; font-weight:600; } .vh-font-btn:focus{outline:2px solid #4f8cff;outline-offset:2px} .vh-font-label{font-size:.9em;opacity:.8} @media (prefers-color-scheme: dark){ .vh-font-btn{background:rgba(255,255,255,.08);color:#eaeaea;border-color:rgba(255,255,255,.2)} } </style> </head> <body> <script> (function () { const STORAGE_KEY = 'vhFontScale'; const MIN = 0.8, MAX = 1.6, STEP = 0.1; let scale = parseFloat(localStorage.getItem(STORAGE_KEY) || '1') || 1;
  const NAV_SELECTORS = [
    'nav[role="navigation"]','header nav','nav','#navbar','.navbar','[data-nav]'
  ].join(',');

  const EXCLUDE_FROM_SCALING = new Set(['SCRIPT','STYLE','NOSCRIPT','SVG','IMG','CANVAS','IFRAME','VIDEO','AUDIO']);

  function clamp(v){ return Math.max(MIN, Math.min(MAX, v)); }
  function findNav(){
    let nav = document.querySelector(NAV_SELECTORS);
    if (!nav) { const header = document.querySelector('header'); if (header) nav = header.querySelector('nav') || header; }
    return nav;
  }
  function shouldSkip(el){
    if (!el || el.nodeType !== 1) return true;
    if (EXCLUDE_FROM_SCALING.has(el.tagName)) return true;
    if (!el.offsetParent && el !== document.body) return true;
    return false;
  }
  function collectTargets(){
    const nav = findNav();
    const all = Array.from(document.body.querySelectorAll('*'));
    return all.filter(el => {
      if (shouldSkip(el)) return false;
      if (nav && (el === nav || nav.contains(el))) return false;
      return !!(el.textContent && el.textContent.trim().length);
    });
  }
  function primeOriginals(els){
    els.forEach(el => {
      if (!el.dataset.vhOrigFontSize) {
        el.dataset.vhOrigFontSize = getComputedStyle(el).fontSize;
      }
    });
  }
  function applyScale(els){
    els.forEach(el => {
      const base = parseFloat(el.dataset.vhOrigFontSize || getComputedStyle(el).fontSize);
      if (isFinite(base)) el.style.fontSize = (base * scale).toFixed(2) + 'px';
    });
  }
  function resetScale(els){
    els.forEach(el => {
      if (el.dataset.vhOrigFontSize) el.style.fontSize = el.dataset.vhOrigFontSize;
      else el.style.removeProperty('font-size');
    });
  }
  function persist(){ localStorage.setItem(STORAGE_KEY, String(scale)); }

  function ensureSameLine(nav, container){
    if (!nav || !container) return;
    // First attempt: float right for non-flex navs
    container.style.cssFloat = 'right';
    // If it still wraps, fallback to absolute pinning
    requestAnimationFrame(() => {
      const movedDown = container.offsetTop > (nav.offsetTop + 4);
      if (movedDown) {
        const prevPos = getComputedStyle(nav).position;
        if (prevPos === 'static') { nav.dataset.vhPrevPos = 'static'; nav.style.position = 'relative'; }
        container.style.cssFloat = 'none';
        container.style.position = 'absolute';
        container.style.right = '10px';
        container.style.top = '50%';
        container.style.transform = 'translateY(-50%)';
        container.style.zIndex = '999';
      }
    });
  }

  function buildControls(){
    const nav = findNav() || document.body;
    const container = document.createElement('div');
    container.className = 'vh-font-controls';
    container.setAttribute('aria-label','Font size controls');

    const label = document.createElement('span');
    label.className = 'vh-font-label';
    

    const btnDec = document.createElement('button');
    btnDec.type = 'button'; btnDec.className = 'vh-font-btn'; btnDec.textContent = 'A‚àí'; btnDec.title = 'Decrease text size';
    const btnInc = document.createElement('button');
    btnInc.type = 'button'; btnInc.className = 'vh-font-btn'; btnInc.textContent = 'A+'; btnInc.title = 'Increase text size';
    const btnReset = document.createElement('button');
    btnReset.type = 'button'; btnReset.className = 'vh-font-btn'; btnReset.textContent = 'Reset'; btnReset.title = 'Reset text size';

    container.append(label, btnDec, btnInc, btnReset);

    if (nav === document.body) {
      container.style.position = 'fixed';
      container.style.top = '10px';
      container.style.right = '10px';
      container.style.zIndex = '9999';
    }
    nav.appendChild(container);

    ensureSameLine(nav, container);
    window.addEventListener('resize', () => ensureSameLine(nav, container));

    const els = collectTargets();
    primeOriginals(els);
    if (scale !== 1) applyScale(els);

    btnInc.addEventListener('click', () => { scale = clamp((Math.round((scale + STEP) * 10) / 10)); applyScale(els); persist(); });
    btnDec.addEventListener('click', () => { scale = clamp((Math.round((scale - STEP) * 10) / 10)); applyScale(els); persist(); });
    btnReset.addEventListener('click', () => { scale = 1; resetScale(els); persist(); });

    const mo = new MutationObserver(() => {
      const newEls = collectTargets();
      primeOriginals(newEls);
      if (scale !== 1) applyScale(newEls);
    });
    mo.observe(document.body, { childList: true, subtree: true });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', buildControls);
  } else {
    buildControls();
  }
})();
</script> </body> </html>
</body>
</html>